## Bellbi 要件定義書

### 1. ドキュメント情報

- **ドキュメント名**: Bellbi 要件定義書  
- **版数**: 1.0（ドラフト）  
- **作成日**: 2025-12-01  
- **作成者**: （未定）  
- **対象システム**: Bellbi（べるび）

---

### 2. システム概要

- **2.1 システム名**  
  - Bellbi（べるび）

- **2.2 システムの目的**  
  - 美容・医療・歯科業界の事業者および個人に対して、以下の機能を統合的に提供する Web サービスを構築する。  
    - 美容・医療・歯科に特化した求人・スカウト機能  
    - サロン・クリニック向けの簡易な売上・経費管理（経営現場改善）機能  
    - 個人事業主・中小事業者向けの補助金情報の提供  
    - 会員制ECモール構築・運用支援  
    - ファクタリング連携などによる資金繰りサポート

- **2.3 対象ユーザ**  
  - **個人ユーザ**  
    - 美容師、看護師、歯科衛生士などの求職者・フリーランス  
  - **事業者ユーザ**  
    - 美容サロン、エステサロン、クリニック、歯科医院などのオーナー・担当者  
  - **運営管理者**  
    - Bellbi 運営事務局

- **2.4 提供形態**  
  - Webブラウザから利用する SaaS 型サービス  
  - PC・タブレット・スマートフォン対応（レスポンシブWeb）

---

### 3. 前提条件・制約

- **3.1 開発技術・プラットフォーム**  
  - サーバサイドフレームワーク: Laravel（PHP）  
  - データベース: MySQL または互換性のあるRDBMS  
  - インフラ: LAMP/LEMP 相当（詳細はインフラ設計で別途定義）  
  - フロントエンド:  
    - JavaScript: jQuery を利用する。  
    - CSS: 開発初期〜中盤は「通常のCSS（生のCSS）」でスタイルを実装する。  
    - Tailwind CSS: プロジェクトには導入しておき、**最終段階の微調整時にのみ Tailwind のユーティリティクラスを利用する**。  
      - それまでは Tailwind のクラスは基本的に使用しない方針とする。

- **3.2 データ設計ルール**  
  - すべての主要テーブルに `delete_flg` を必ず持たせる。  
    - 値: 0 = 有効データ, 1 = 削除（論理削除）  
  - ステータス・カテゴリ等は必ず数値（整数型）で管理する。  
    - 例: `status`, `category`, `role`, `type`, `plan_status` など  
  - 数値の意味定義は、Laravel 側で Enum または定数クラス等により一元管理する。

- **3.3 テナント方針**  
  - `companies`（事業者）、`stores`（店舗）を単位とする簡易マルチテナント構成とする。  
  - 事業者単位でプラン・課金を管理する。

- **3.4 認証・セキュリティ**  
  - メールアドレス＋パスワードによるログイン認証。  
  - パスワードはハッシュ化して保存（Laravel 標準機能を利用）。  
  - CSRF、XSS、SQLインジェクション等の対策はフレームワーク標準機能を基本とする。

---

### 4. アクター定義

- **4.1 個人ユーザ**  
  - 求人の閲覧・検索  
  - 求人への応募  
  - スカウトの受信・閲覧・返信  
  - 補助金情報の閲覧・ブックマーク  
  - ECモールでの商品閲覧・購入（将来のオンライン決済連携を含む）

- **4.2 事業者ユーザ**  
  - 事業者情報・店舗情報の登録・編集  
  - サブスクリプションプランの契約・変更  
  - 求人の作成・公開・管理  
  - スカウト送信・管理  
  - 売上・経費の登録および簡易レポートの閲覧  
  - ECショップの開設・商品登録・受注管理（プラン条件による）

- **4.3 運営管理者**  
  - ユーザ・事業者・店舗の管理  
  - 補助金情報の登録・更新・公開管理  
  - プラン・課金状態の管理  
  - 不正利用や規約違反の監視・対応

---

### 5. 機能要件

#### 5.1 求人広告機能

- **求人一覧・検索**  
  - 業種（美容/医療/歯科 等）、職種、エリア、雇用形態、給与レンジなどの条件で求人を検索できる。  
  - 公開ステータスが「公開中」の求人のみを表示する。  
  - ログインしていないユーザも求人一覧・詳細を閲覧可能とする。

- **求人詳細表示**  
  - 店舗情報、仕事内容、勤務条件、給与、福利厚生などを表示する。  
  - 求人詳細画面から応募フォームへ遷移できる。

- **求人作成・管理（事業者向け）**  
  - 事業者および店舗単位で求人を新規作成・編集できる。  
  - 求人ステータスは数値で管理する。  
    - 0: 下書き  
    - 1: 公開中  
    - 2: 公開停止  
  - 公開開始日・終了日を設定できる。  
  - 事業者は自社の求人一覧を確認できる。

- **応募機能（個人向け）**  
  - 個人ユーザは求人詳細から応募できる。  
  - 応募時に自由入力メッセージを送信できる。  
  - 応募ステータスは数値で管理する。  
    - 1: 応募済  
    - 2: 書類選考中  
    - 3: 面接中  
    - 4: 内定  
    - 5: 不採用  
    - 9: 応募者によるキャンセル  
  - 個人ユーザは自分の応募履歴一覧を閲覧できる。  
  - 事業者ユーザは自社求人に対する応募一覧を閲覧できる。

#### 5.2 スカウト機能

- **スカウト用プロフィール（個人）**  
  - 個人ユーザはスカウト用のプロフィールを作成・編集できる。  
    - 希望業種、希望職種、経験年数、希望勤務形態など。  
  - スカウト公開フラグ（0: 非公開, 1: 公開）を設定できる。

- **スカウト送信（事業者）**  
  - 事業者ユーザはスカウト公開中の個人プロフィールを検索できる。  
  - 個人ごとにスカウトメッセージを送信できる。  
  - スカウトステータスは数値で管理する。  
    - 1: 送信済  
    - 2: 既読  
    - 3: 返信あり  
    - 9: クローズ

- **スカウト受信・返信（個人）**  
  - 個人ユーザは受信したスカウト一覧を閲覧できる。  
  - スカウト詳細画面でメッセージの送受信（簡易チャット形式）を行える。  
  - 必要に応じてスカウト送信元の事業者や店舗をブロックできる（将来拡張含む）。

#### 5.3 経営現場改善機能（簡易会計）

- **売上・経費登録**  
  - 事業者ユーザは店舗ごとに売上・経費を日別に登録できる。  
  - 科目マスタ（`account_items`）を会社単位で管理し、売上・経費の種別を数値で表現する。  
    - `type`: 1 = 売上, 2 = 経費

- **集計・レポート**  
  - 月次の売上・経費サマリを表示できる。  
  - メニュー別売上、カテゴリ別経費などの簡易的な集計結果を表示できる。  
  - 必要に応じてCSV形式でエクスポートできる（詳細は別途検討）。

- **ファクタリング連携（ペイトナー想定）**  
  - 売上データからファクタリング申請用の案件データを作成できる。  
  - 連携状態を数値ステータスで管理する。  
    - 1: 申請準備中  
    - 2: 申請済  
    - 3: 審査中  
    - 4: 承認  
    - 5: 否認  
    - 6: 資金振込済  
  - 当初は手動連携/記録中心とし、将来的にAPI連携を検討する。

#### 5.4 補助金情報機能

- **補助金情報登録・管理（運営）**  
  - 運営管理者は補助金情報（名称、対象業種、対象地域、申請期間、概要、外部URL等）を登録・編集できる。  
  - 補助金ステータスは数値で管理する。  
    - 1: 募集中  
    - 2: 締切済  
    - 3: 未開始

- **補助金閲覧・検索（利用者全般）**  
  - 全ユーザが補助金一覧・詳細を閲覧できる（ログインなしでも可とするかは要検討）。  
  - 業種、地域、ステータス等で絞り込み検索ができる。

- **ブックマーク（ログインユーザ）**  
  - ログインユーザは補助金情報をブックマーク登録・解除できる。  
  - 自分のブックマークした補助金一覧を閲覧できる。

#### 5.5 会員制ECモール機能

- **ショップ開設（事業者）**  
  - プレミアムプラン（または別枠プラン）を契約している事業者は、自社ショップ（モール内店舗）を開設できる。  
  - ショップのステータスを数値で管理する。  
    - 0: 準備中  
    - 1: 公開  
    - 9: 停止

- **商品管理**  
  - 事業者ユーザは商品を登録・編集・論理削除できる。  
  - 価格、在庫数、カテゴリ（数値）を管理する。  
  - 商品の公開/非公開ステータスを数値で管理する。

- **受注管理**  
  - 受注一覧を表示し、注文のステータスを管理できる。  
    - 1: 新規  
    - 2: 入金確認済  
    - 3: 発送済  
    - 4: 完了  
    - 9: キャンセル

- **購入機能（エンドユーザ）**  
  - ショップ・商品一覧・詳細を閲覧できる。  
  - カート機能を用いて注文を確定できる。  
  - 初期段階ではオフライン決済（銀行振込・店頭支払い等）を想定し、オンライン決済は将来拡張とする。

#### 5.6 プラン・課金管理

- **プラン定義**  
  - ベーシック / アドバンス / プレミアム等のプランを定義する。  
  - プランごとに月額料金および利用可能機能を数値で管理する。  
    - 例: 機能ごとにビットマスク、または中間テーブルで管理。

- **契約管理**  
  - 事業者単位で現在契約中のプランを管理する。  
  - 契約ステータスは数値で管理する。  
    - 1: 有効  
    - 2: トライアル  
    - 3: 支払遅延  
    - 9: 解約  
  - 課金処理・請求方法の詳細は別途検討とし、ここではプラン状態の管理を範囲とする。

---

### 6. 非機能要件（概要）

- **6.1 パフォーマンス**  
  - 通常利用時、主要画面の表示時間は概ね3秒以内を目標とする。

- **6.2 セキュリティ**  
  - パスワードハッシュ化、CSRF対策、XSS対策、SQLインジェクション対策を実施する。  
  - 管理系画面は運営管理者ロールのみがアクセス可能とする。

- **6.3 ログ・監査**  
  - ログイン、プラン変更、ファクタリング申請等の重要操作については操作ログを記録する。

- **6.4 運用・保守**  
  - 本番・ステージング・開発環境を分離する。  
  - バックアップ方針はインフラ設計にて別途定義する。

---

### 7. 今後の検討事項

- オンライン決済（クレジットカード等）の導入可否と方式  
- ファクタリングサービス（ペイトナー）との具体的なAPI連携仕様  
- 補助金情報の更新フロー（外部サイトからのクローリング可否など）  
- スマホアプリ化（必要性・タイミング）の検討


